{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\nomcg\\\\desktop\\\\thinkful\\\\ReactUnitProjects\\\\scrap-chef\\\\src\\\\actions.js\";\nimport React from 'react';\nimport Swal from 'sweetalert2';\nimport withReactContent from 'sweetalert2-react-content';\nlet herokuAPIEndpoint = \"https://scrap-chef-server.herokuapp.com/\";\nexport const updateState = (key, value) => dispatch => {\n  dispatch({\n    type: 'UPDATE_STATE',\n    key,\n    value\n  });\n  return Promise.resolve();\n};\nexport const ADD_TO_KITCHEN = 'ADD_TO_KITCHEN';\nexport const addToKitchen = ingredient => ({\n  type: ADD_TO_KITCHEN,\n  ingredient\n});\nexport const addTo = (item, all) => dispatch => {\n  let first = new Promise(function (resolve) {\n    dispatch(addToKitchen(item));\n    resolve();\n  });\n  first.then(function () {\n    dispatch(fetchMenu([...all, item]));\n  });\n};\nexport const REMOVE_FROM_KITCHEN = 'REMOVE_FROM_KITCHEN';\nexport const removeFromKitchen = item => ({\n  type: REMOVE_FROM_KITCHEN,\n  item\n});\nexport const removeItem = (item, all) => dispatch => {\n  let first = new Promise(function (resolve) {\n    dispatch(removeFromKitchen(item));\n    resolve();\n  });\n  first.then(function () {\n    let newList = [];\n    all.forEach(function (ingredient) {\n      if (ingredient !== item) {\n        newList.push(ingredient);\n      }\n    });\n    dispatch(fetchMenu(newList));\n  });\n};\nexport const FIND_RECIPE = 'FIND_RECIPE';\nexport const findRecipe = options => ({\n  type: FIND_RECIPE,\n  options\n});\nexport const UPDATE_MENU = 'UPDATE_MENU';\nexport const updateMenu = menu => ({\n  type: UPDATE_MENU,\n  menu\n});\nexport const fetchMenu = ingredients => dispatch => {\n  const recipePuppy = 'https://cors-anywhere.herokuapp.com/http://www.recipepuppy.com/api?i=';\n  let joinedIngredients = ingredients.join(', ');\n  fetch(recipePuppy + joinedIngredients + '&p=' + 1).then(res => {\n    if (!res.ok) {\n      return Promise.reject(res.statusText);\n    }\n\n    return res.json();\n  }).then(menu => {\n    dispatch(updateMenu(menu));\n  });\n};\nexport const LOG_IN = 'LOG_IN';\nexport const logIn = input => ({\n  type: LOG_IN,\n  input\n});\nexport const atlasLogIn = userInput => dispatch => {\n  var loadingSwirl = document.getElementById(\"loading-container\");\n  loadingSwirl.classList.remove(\"hidden\");\n  const MySwal = withReactContent(Swal);\n  let GETbyUsernameURL = herokuAPIEndpoint + \"find?user=\" + userInput;\n  fetch(GETbyUsernameURL).then(response => {\n    if (response.status === 404) {\n      throw new Error(response.status + \": Username not found.\");\n    }\n\n    if (response.status === 200) {\n      return response.json();\n    }\n  }).then(response => {\n    loadingSwirl.classList.add(\"hidden\");\n    return response;\n  }).then(data => {\n    MySwal.fire({\n      title: React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      }, \"Hello World\"),\n      footer: 'Copyright 2018',\n      onOpen: () => {\n        MySwal.clickConfirm();\n      }\n    }).then(() => {\n      return MySwal.fire({\n        title: '',\n        text: \"Welcome back, Chef \" + data.user + \"!\",\n        type: 'success',\n        confirmButtonText: \"Let's Get Cookin'.\"\n      });\n    });\n    dispatch(fetchMenu(data.ingredients));\n    return data;\n  }).then(data => {\n    dispatch(logIn(data));\n  }).catch(error => {\n    loadingSwirl.classList.add(\"hidden\");\n    MySwal.fire({\n      title: React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      }, \"Hello World\"),\n      footer: 'Copyright 2018',\n      onOpen: () => {\n        MySwal.clickConfirm();\n      }\n    }).then(() => {\n      return MySwal.fire({\n        title: 'Hmm...',\n        text: error,\n        type: 'error',\n        confirmButtonText: 'Okay'\n      });\n    });\n  });\n};\nexport const FIRST_CALL = 'FIRST_CALL';\nexport const firstCall = () => ({\n  type: FIRST_CALL\n});\nexport const tryLogOut = () => dispatch => {\n  const startingIng = [\"Chicken\", \"Avocado\", \"Tomato\"];\n  let first = new Promise(function (resolve) {\n    dispatch(logOut());\n    resolve();\n  });\n  first.then(function () {\n    dispatch(fetchMenu(startingIng));\n  });\n};\nexport const LOG_OUT = 'LOG_OUT';\nexport const logOut = () => ({\n  type: LOG_OUT\n});\nexport const RESIZE = 'RESIZE';\nexport const resize = () => ({\n  type: RESIZE\n});\nexport const SAVE = 'SAVE';\nexport const save = () => ({\n  type: SAVE\n});\nexport const trySave = (id, user, ingredients) => dispatch => {\n  const MySwal = withReactContent(Swal);\n  let postURL = herokuAPIEndpoint + \"users/\" + id;\n  let data = {\n    _id: id,\n    user: user,\n    ingredients: ingredients\n  };\n  fetch(postURL, {\n    method: 'PUT',\n    body: JSON.stringify(data),\n    headers: {\n      'Content-Type': 'application/json'\n    }\n  }).then(response => {\n    if (response.ok) {\n      return response.json();\n    }\n\n    throw new Error(response.statusText);\n  }).then(response => {\n    dispatch(save());\n    return response;\n  }).then(response => {\n    MySwal.fire({\n      title: React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 208\n        },\n        __self: this\n      }, \"Hello World\"),\n      footer: 'Copyright 2018',\n      onOpen: () => {\n        MySwal.clickConfirm();\n      }\n    }).then(() => {\n      return MySwal.fire({\n        title: '',\n        text: response.message,\n        type: 'success',\n        confirmButtonText: \"Back to Cookin'.\"\n      });\n    });\n  }).catch(error => {\n    MySwal.fire({\n      title: React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 226\n        },\n        __self: this\n      }, \"Hello World\"),\n      footer: 'Copyright 2018',\n      onOpen: () => {\n        MySwal.clickConfirm();\n      }\n    }).then(() => {\n      return MySwal.fire({\n        title: 'Hmm...!',\n        text: error,\n        type: 'error',\n        confirmButtonText: 'Okay'\n      });\n    });\n  });\n};\nexport const CREATE_USER = 'CREATE_USER';\nexport const createUser = (newUser, insertedId) => ({\n  type: CREATE_USER,\n  newUser,\n  insertedId\n});\nexport const atlasCreate = (userInput, ingredients) => dispatch => {\n  var loadingSwirl = document.getElementById(\"loading-container\");\n  loadingSwirl.classList.remove(\"hidden\");\n  const MySwal = withReactContent(Swal);\n  let postURL = herokuAPIEndpoint + \"users/\";\n  let data = {\n    user: userInput,\n    ingredients: ingredients\n  };\n  fetch(postURL, {\n    method: 'POST',\n    body: JSON.stringify(data),\n    headers: {\n      'Content-Type': 'application/json'\n    }\n  }).then(response => {\n    loadingSwirl.classList.add(\"hidden\");\n\n    if (response.ok) {\n      return response.json();\n    }\n\n    throw new Error(response.statusText);\n  }).then(response => {\n    if (response.message === \"User already exists.\") {\n      throw new Error(response.message);\n    }\n\n    return response;\n  }).then(response => {\n    dispatch(createUser(response.newUser, response.insertedId));\n    return response;\n  }).then(response => {\n    MySwal.fire({\n      title: React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 286\n        },\n        __self: this\n      }, \"Hello World\"),\n      footer: 'Copyright 2018',\n      onOpen: () => {\n        MySwal.clickConfirm();\n      }\n    }).then(() => {\n      return MySwal.fire({\n        title: '',\n        text: \"Welcome, Chef \" + response.newUser + \"!\",\n        type: 'success',\n        confirmButtonText: \"Let's Get Cookin'.\"\n      });\n    });\n  }).catch(error => {\n    MySwal.fire({\n      title: React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 304\n        },\n        __self: this\n      }, \"Hello World\"),\n      footer: 'Copyright 2018',\n      onOpen: () => {\n        MySwal.clickConfirm();\n      }\n    }).then(() => {\n      return MySwal.fire({\n        title: 'Hmm...!',\n        text: error,\n        type: 'error',\n        confirmButtonText: 'Okay'\n      });\n    });\n  });\n};","map":{"version":3,"sources":["C:\\Users\\nomcg\\desktop\\thinkful\\ReactUnitProjects\\scrap-chef\\src\\actions.js"],"names":["React","Swal","withReactContent","herokuAPIEndpoint","updateState","key","value","dispatch","type","Promise","resolve","ADD_TO_KITCHEN","addToKitchen","ingredient","addTo","item","all","first","then","fetchMenu","REMOVE_FROM_KITCHEN","removeFromKitchen","removeItem","newList","forEach","push","FIND_RECIPE","findRecipe","options","UPDATE_MENU","updateMenu","menu","ingredients","recipePuppy","joinedIngredients","join","fetch","res","ok","reject","statusText","json","LOG_IN","logIn","input","atlasLogIn","userInput","loadingSwirl","document","getElementById","classList","remove","MySwal","GETbyUsernameURL","response","status","Error","add","data","fire","title","footer","onOpen","clickConfirm","text","user","confirmButtonText","catch","error","FIRST_CALL","firstCall","tryLogOut","startingIng","logOut","LOG_OUT","RESIZE","resize","SAVE","save","trySave","id","postURL","_id","method","body","JSON","stringify","headers","message","CREATE_USER","createUser","newUser","insertedId","atlasCreate"],"mappings":"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","sourcesContent":["\r\nimport React from 'react';\r\nimport Swal from 'sweetalert2'\r\nimport withReactContent from 'sweetalert2-react-content'\r\n\r\nlet herokuAPIEndpoint = \"https://scrap-chef-server.herokuapp.com/\"\r\n\r\nexport const updateState = (key, value)=> dispatch=>{\r\n    dispatch({\r\n          type:'UPDATE_STATE',\r\n          key, value\r\n        })\r\n    return Promise.resolve()\r\n    }\r\n\r\nexport const ADD_TO_KITCHEN = 'ADD_TO_KITCHEN';\r\nexport const addToKitchen = ingredient => ({\r\n    type: ADD_TO_KITCHEN,\r\n    ingredient\r\n});\r\n\r\nexport const addTo = (item, all) => dispatch => {\r\n  let first = new Promise(function(resolve){\r\n    dispatch(addToKitchen(item))\r\n    resolve()\r\n  });\r\n  first.then(function(){\r\n      dispatch(fetchMenu([...all,item]))\r\n  })\r\n}\r\n\r\nexport const REMOVE_FROM_KITCHEN = 'REMOVE_FROM_KITCHEN';\r\nexport const removeFromKitchen = item => ({\r\n    type: REMOVE_FROM_KITCHEN,\r\n    item\r\n});\r\n\r\nexport const removeItem = (item, all) => dispatch => {\r\n  let first = new Promise(function(resolve){\r\n    dispatch(removeFromKitchen(item))\r\n    resolve()\r\n  });\r\n  first.then(function(){\r\n      let newList = []\r\n      all.forEach(function(ingredient){\r\n        if (ingredient !== item){\r\n          newList.push(ingredient)\r\n        }\r\n      })\r\n      dispatch(fetchMenu(newList))\r\n  })\r\n}\r\n\r\nexport const FIND_RECIPE = 'FIND_RECIPE';\r\nexport const findRecipe = options => ({\r\n    type: FIND_RECIPE,\r\n    options\r\n});\r\n\r\nexport const UPDATE_MENU = 'UPDATE_MENU';\r\nexport const updateMenu = menu => ({\r\n    type: UPDATE_MENU,\r\n    menu\r\n});\r\n\r\nexport const fetchMenu = (ingredients) => dispatch => {\r\n  const recipePuppy = 'https://cors-anywhere.herokuapp.com/http://www.recipepuppy.com/api?i='\r\n  let joinedIngredients = ingredients.join(', ')\r\n  fetch(recipePuppy + joinedIngredients + '&p=' + 1)\r\n      .then(res => {\r\n          if (!res.ok) {\r\n              return Promise.reject(res.statusText);\r\n          }\r\n          return res.json();\r\n      })\r\n      .then(menu => {\r\n          dispatch(updateMenu(menu));\r\n      });\r\n}\r\n\r\nexport const LOG_IN = 'LOG_IN';\r\nexport const logIn = input => ({\r\n    type: LOG_IN,\r\n    input\r\n});\r\n\r\nexport const atlasLogIn = userInput => dispatch => {\r\n    var loadingSwirl = document.getElementById(\"loading-container\")\r\n    loadingSwirl.classList.remove(\"hidden\")\r\n    const MySwal = withReactContent(Swal)\r\n    let GETbyUsernameURL = herokuAPIEndpoint + `find?user=` + userInput\r\n    fetch (GETbyUsernameURL)\r\n    .then(response => {\r\n        if (response.status === 404) {\r\n            throw new Error (response.status + `: Username not found.`);\r\n        }\r\n        if (response.status === 200) {\r\n            return response.json();\r\n        }\r\n    })\r\n    .then(response => {\r\n        loadingSwirl.classList.add(\"hidden\")\r\n        return response\r\n    })\r\n    .then(data => {\r\n        MySwal.fire({\r\n            title: <p>Hello World</p>,\r\n            footer: 'Copyright 2018',\r\n            onOpen: () => {\r\n              MySwal.clickConfirm()\r\n            }\r\n          }).then(() => {\r\n            return MySwal.fire(\r\n              {\r\n                title: '',\r\n                text: \"Welcome back, Chef \" + data.user + \"!\",\r\n                type: 'success',\r\n                confirmButtonText: `Let's Get Cookin'.`\r\n              }\r\n            )\r\n          })\r\n          dispatch(fetchMenu(data.ingredients))\r\n        return data          \r\n    })\r\n    .then(data => {\r\n      dispatch(logIn(data))\r\n    })\r\n    .catch (error => {\r\n      loadingSwirl.classList.add(\"hidden\")\r\n      MySwal.fire({\r\n            title: <p>Hello World</p>,\r\n            footer: 'Copyright 2018',\r\n            onOpen: () => {\r\n              MySwal.clickConfirm()\r\n            }\r\n          }).then(() => {\r\n            return MySwal.fire(\r\n              {\r\n                title: 'Hmm...',\r\n                text: error,\r\n                type: 'error',\r\n                confirmButtonText: 'Okay'\r\n              }\r\n            )\r\n          })\r\n    });\r\n}\r\n\r\nexport const FIRST_CALL = 'FIRST_CALL'\r\nexport const firstCall = () => ({\r\n  type: FIRST_CALL\r\n})\r\n\r\nexport const tryLogOut = () => dispatch => {\r\n  const startingIng = [\"Chicken\", \"Avocado\", \"Tomato\"]\r\n  let first = new Promise(function(resolve){\r\n    dispatch(logOut())\r\n    resolve()\r\n  });\r\n  first.then(function(){\r\n    dispatch(fetchMenu(startingIng))\r\n  })\r\n}\r\n\r\nexport const LOG_OUT = 'LOG_OUT';\r\nexport const logOut = () => ({\r\n    type: LOG_OUT\r\n});\r\n\r\nexport const RESIZE = 'RESIZE';\r\nexport const resize = () => ({\r\n    type: RESIZE\r\n});\r\n\r\nexport const SAVE = 'SAVE'\r\nexport const save = () => ({\r\n    type: SAVE\r\n})\r\n\r\nexport const trySave = (id, user, ingredients) => dispatch => {\r\n    const MySwal = withReactContent(Swal)\r\n    let postURL = herokuAPIEndpoint + `users/` + id\r\n    let data = {\r\n        _id: id,\r\n        user: user,\r\n        ingredients: ingredients\r\n    };\r\n\r\n    fetch(postURL, {\r\n        method: 'PUT',\r\n        body: JSON.stringify(data),\r\n        headers:{\r\n        'Content-Type': 'application/json'\r\n        }\r\n    })\r\n    .then( response => {\r\n        if (response.ok) {\r\n            return response.json();\r\n        }\r\n        throw new Error (response.statusText);\r\n    })\r\n    .then( response => {\r\n        dispatch(save())\r\n        return response\r\n    })\r\n    .then( response => {\r\n        MySwal.fire({\r\n            title: <p>Hello World</p>,\r\n            footer: 'Copyright 2018',\r\n            onOpen: () => {\r\n              MySwal.clickConfirm()\r\n            }\r\n          }).then(() => {\r\n            return MySwal.fire(\r\n              {\r\n                title: '',\r\n                text: response.message,\r\n                type: 'success',\r\n                confirmButtonText: `Back to Cookin'.`\r\n              }\r\n            )\r\n          })\r\n    })\r\n    .catch (error => {\r\n        MySwal.fire({\r\n            title: <p>Hello World</p>,\r\n            footer: 'Copyright 2018',\r\n            onOpen: () => {\r\n              MySwal.clickConfirm()\r\n            }\r\n          }).then(() => {\r\n            return MySwal.fire(\r\n              {\r\n                title: 'Hmm...!',\r\n                text: error,\r\n                type: 'error',\r\n                confirmButtonText: 'Okay'\r\n              }\r\n            )\r\n          })\r\n    });\r\n}\r\n\r\nexport const CREATE_USER = 'CREATE_USER';\r\nexport const createUser = (newUser, insertedId) => ({\r\n    type: CREATE_USER,\r\n    newUser,\r\n    insertedId\r\n});\r\n\r\nexport const atlasCreate = (userInput, ingredients) => dispatch => {\r\n    var loadingSwirl = document.getElementById(\"loading-container\")\r\n    loadingSwirl.classList.remove(\"hidden\")\r\n    const MySwal = withReactContent(Swal)\r\n    let postURL = herokuAPIEndpoint + `users/`\r\n    let data = {\r\n        user: userInput,\r\n        ingredients: ingredients\r\n    };\r\n    fetch(postURL, {\r\n      method: 'POST',\r\n      body: JSON.stringify(data),\r\n      headers:{\r\n        'Content-Type': 'application/json'\r\n      }\r\n    })\r\n    .then(response => {\r\n        loadingSwirl.classList.add(\"hidden\")\r\n        if (response.ok) {\r\n            return response.json();\r\n        }\r\n        throw new Error (response.statusText);\r\n    })\r\n    .then(response => {\r\n        if (response.message === \"User already exists.\"){\r\n            throw new Error (response.message)\r\n        }\r\n        return response\r\n    })\r\n    .then( response => {\r\n        dispatch(createUser(response.newUser, response.insertedId))\r\n        return response\r\n    })\r\n    .then( response => {\r\n        MySwal.fire({\r\n            title: <p>Hello World</p>,\r\n            footer: 'Copyright 2018',\r\n            onOpen: () => {\r\n              MySwal.clickConfirm()\r\n            }\r\n          }).then(() => {\r\n            return MySwal.fire(\r\n              {\r\n                title: '',\r\n                text: \"Welcome, Chef \" + response.newUser + \"!\",\r\n                type: 'success',\r\n                confirmButtonText: `Let's Get Cookin'.`\r\n              }\r\n            )\r\n          })\r\n    })\r\n    .catch (error => {\r\n        MySwal.fire({\r\n            title: <p>Hello World</p>,\r\n            footer: 'Copyright 2018',\r\n            onOpen: () => {\r\n              MySwal.clickConfirm()\r\n            }\r\n          }).then(() => {\r\n            return MySwal.fire(\r\n              {\r\n                title: 'Hmm...!',\r\n                text: error,\r\n                type: 'error',\r\n                confirmButtonText: 'Okay'\r\n              }\r\n            )\r\n          })\r\n    });\r\n\r\n}\r\n"]},"metadata":{},"sourceType":"module"}